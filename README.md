# Сервис заказов

Простой веб-сервис для работы с заказами, построенный на Go с использованием кэширования и Kafka.

## Описание

Сервис предоставляет HTTP API для получения информации о заказах. Использует LRU-кэш для быстрого доступа к данным и PostgreSQL для постоянного хранения. Поддерживает асинхронную обработку сообщений через Apache Kafka.



## Структура проекта

```
pr1/
├── main.go              # Точка входа приложения
├── models.go            # Модели данных
├── handlers.go          # HTTP обработчики
├── database.go          # Работа с базой данных
├── cache.go             # LRU кэш
├── kafka.go             # Работа с Kafka
├── globals.go           # Глобальные переменные
├── docker-compose.yaml  # Конфигурация Docker
├── static/              # Веб-интерфейс
│   └── index.html       # Главная страница
├── database/            # SQL скрипты
│   ├── init/
│   │   └── init.sql
│   └── insert.sql
├── *.sh                 # Скрипты для тестирования
└── Makefile            # Команды сборки
```

## API

### Получение заказа

```
GET /order?id={order_uid}
```

**Параметры:**
- `id` - уникальный идентификатор заказа

**Ответ:** JSON объект с информацией о заказе

## Веб-интерфейс

Проект включает простой веб-интерфейс для работы с заказами.

### Доступ к интерфейсу

После запуска сервера веб-интерфейс доступен по адресу:
```
http://localhost:8080
```

## Запуск

```bash

make kafka    # Запуск Kafka
make run      # Запуск приложения
```


## Тестирование

В проекте присутствуют несколько скриптов для тестирования, которые используют тестовые данные, содержащиеся в файле model.json. Эти данные применяются в следующих скриптах:

`request.sh` — отправка запроса с использованием значения id, взятого из model.json.

`request_speed.sh` — тест производительности, выполняющий запросы с использованием id из model.json.

`producer.sh` — отправка сообщений в Kafka с данными, взятыми из файла model.json.

## Конфигурация

Основные настройки находятся в `globals.go`:
- Размер кэша
- Настройки подключения к БД
- Настройки Kafka


